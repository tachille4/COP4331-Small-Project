<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Mobile support -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Page title in tab -->
    <title>Login - Contact Manager</title>
    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Import font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Moderustic:wght@300..800&display=swap"
      rel="stylesheet"
    />
    <!-- Custom CSS styles -->
    <style>
      body, html /* Apply font to entire page */ {
        height: 100%;
        font-family: "Moderustic", sans-serif;
      }
      body /* Page settings */ {
        background-image: url("images/icebergpurple.avif");
        background-size: 100%;
        background-position: -100%, -100%;
        backdrop-filter: blur(8px);
      }
      .login-container /* Center the login box (card) */ {
        position: relative;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 20px;
        height: 100vh;
      }
      .card /* Custom card color */ {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: #232323;
        border-radius: 15px;
        margin-bottom: 5px;
        opacity: 1;
        transition: opacity 0.3s ease-in-out;
        max-height: 75vh;
        overflow: auto;
      }
      .card.fade-in /* Card fade-in animation */ {
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
      }
      .card.fade-out /* Card fade-out animation */ {
        opacity: 0;
        visibility: visible;
      }
      .card.show /* Card visibility trigger */ {
        opacity: 1;
      }
      .form-control /* Input box color (not clicked) */ {
        background-color: rgba(255, 255, 255, 0.8);
      }
      .form-control:focus /* Input box color (clicked) */ {
        background-color: rgba(255, 255, 255, 1);
        border-color: #008f9b;
        box-shadow: 0 0 6px 1px rgba(43, 220, 226, 0.7);
      }
      .btn-turquoise /* Turquoise login button, white text */ {
        background-color: #5a4586;
        color: #ffffff;
      }
      .error-msg /* Invalid login/registration message */ {
        color: red;
        font-style: italic;
      }
      .success-msg /* Success message */ {
        color: lime;
        font-style: italic;
      }
      .register-link /* Register link (default white text) */ {
        margin-top: auto;
        position: relative;
        text-align: center;
        width: 100%;
        color: #ffffff;
      }
      .register-link a /* Register hyperlink properties */ {
        font-weight: bold;
        text-decoration: underline !important;
        cursor: pointer;
      }
      .register-link a:hover /* Register hover rules */ {
        color: #34c3d1 !important;
      }
      .hidden /* Hide an element */ {
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
        display: none;
      }
      .show /* Show an element */{
        opacity: 1;
        transition: opacity 0.3s ease-in-out;
        display: inline;
      }
    </style>
  </head>
  <body>
    <!-- Main container that holds the login/register cards -->
    <div class="login-container">
      <!-- Login card -->
      <div class="card text-white" style="width: 40rem; max-width: 90%">
        <div class="card-body p-3">
          <h2 class="card-title text-center mb-4">Contact Manager</h2>
          <!-- Login form elements -->
          <form id="loginForm">
            <div class="mb-4">
              <!-- Username field -->
              <input
                type="text"
                class="form-control form-control-lg"
                id="usernameInput"
                placeholder="Username"
                required
              />
            </div>
            <div class="mb-4">
              <!-- Password field -->
              <input
                type="password"
                class="form-control form-control-lg"
                id="passwordInput"
                placeholder="Password"
                required
              />
            </div>
            <div class="d-grid mt-5">
              <!-- Submit button -->
              <button type="submit" class="btn btn-turquoise">SIGN IN</button>
            </div>
          </form>
          <!-- Error message if the login failed -->
          <div id="loginResult" class="mt-3 text-center error-msg"></div>
        </div>
      </div>
      <!-- Register card (hidden) -->
      <div class="card text-white hidden" style="width: 40rem; max-width: 90%">
        <div class="card-body p-3">
          <h2 class="card-title text-center mb-4">Register an Account</h2>
          <!-- Register form elements -->
          <form id="registerForm">
            <div class="mb-4">
              <!-- First name field -->
              <input
                type="text"
                class="form-control form-control-lg"
                id="firstNameInput"
                placeholder="First name"
                required
              />
            </div>
            <div class="mb-4">
              <!-- Last name field -->
              <input
                type="text"
                class="form-control form-control-lg"
                id="lastNameInput"
                placeholder="Last name"
                required
              />
            </div>
            <div class="mb-4">
              <!-- Username field -->
              <input
                type="text"
                class="form-control form-control-lg"
                id="registerUsername"
                placeholder="Username"
                required
              />
            </div>
            <div class="mb-4">
              <!-- Password field -->
              <input
                type="password"
                class="form-control form-control-lg"
                id="registerPassword"
                placeholder="Password"
                required
              />
            </div>
            <div class="mb-4">
              <!-- Confirm password field -->
              <input
                type="password"
                class="form-control form-control-lg"
                id="confirmPassword"
                placeholder="Confirm password"
                required
              />
            </div>
            <div class="d-grid mt-5">
              <!-- Confirm registration button -->
              <button type="submit" class="btn btn-turquoise">REGISTER</button>
            </div>
          </form>
          <!-- Whether or not registration succeeded (username already exists?)-->
          <div
            id="registerResult"
            class="mt-3 text-center"
          ></div>
        </div>
      </div>
      <!-- Register and login links -->
      <div class="register-link">
        <span id="registerPrompt"
          >Don't have an account? <a id="showRegisterCard">Register</a></span
        >
        <span id="loginPrompt" class="hidden"
          >Already have an account? <a id="showLoginCard">Login</a></span
        >
      </div>
    </div>
    <!-- Bootstrap/Popper dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
    <!-- Linking to local JavaScript files -->
    <script src="js/login.js"></script>
    <script src="js/md5.js"></script>
  </body>
</html>
